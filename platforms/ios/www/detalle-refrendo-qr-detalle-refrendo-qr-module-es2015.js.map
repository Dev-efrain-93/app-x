{"version":3,"sources":["./src/app/pages/detalle-refrendo-qr/detalle-refrendo-qr.page.html","./src/app/pages/detalle-refrendo-qr/detalle-refrendo-qr.module.ts","./src/app/pages/detalle-refrendo-qr/detalle-refrendo-qr.page.scss","./src/app/pages/detalle-refrendo-qr/detalle-refrendo-qr.page.ts"],"names":[],"mappings":"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","file":"detalle-refrendo-qr-detalle-refrendo-qr-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button text=\\\"\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Línea de captura cerrada</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid class=\\\"grid-full-height\\\">\\n    <ion-row class=\\\"row-full-height\\\" justify-content-center align-items-center>\\n\\n      <ion-item *ngIf=\\\"\\\">\\n        <ion-input type=\\\"text\\\" placeholder=\\\"Linea de captura cerrada\\\" [(ngModel)]=\\\"qrData\\\"></ion-input>\\n      </ion-item>\\n\\n      <ion-card class=\\\"qrCard\\\" mode=\\\"ios\\\">\\n\\n        <div class=\\\"scene scene--card\\\">\\n          <div class=\\\"card\\\">\\n            <div class=\\\"card__face card__face--front\\\">\\n              <div class=\\\"qrcode\\\">\\n                <qr-code [value]=\\\"qrData\\\" [size]=\\\"200\\\" [canvas]=\\\"true\\\" class=\\\"ion-padding\\\"></qr-code>\\n                <h5>{{detalleRefrendo.lcc}}</h5>\\n              </div>\\n            </div>\\n            <div class=\\\"card__face card__face--back\\\">\\n              <div class=\\\"barcode\\\">\\n                <ngx-barcode [bc-value]=\\\"qrData\\\" [bc-display-value]=\\\"false\\\" [bc-element-type]=\\\"elementType\\\"></ngx-barcode>\\n                <h5>{{detalleRefrendo.lcc}}</h5>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <ion-card-content>\\n          <br *ngIf=\\\"isQr\\\">\\n          <ion-grid>\\n            <ion-row>\\n              <ion-col class=\\\"col-align-center\\\">\\n                  <ion-button color=\\\"tertiary\\\" (click)=\\\"flipCard()\\\">\\n                    <span *ngIf=\\\"isQr\\\">Ver código de barras</span>\\n                    <span *ngIf=\\\"!isQr\\\">Ver código QR</span>\\n                    <!--<ion-icon slot=\\\"icon-only\\\" src=\\\"../../../assets/icons/rotate-z.svg\\\"></ion-icon>-->\\n                  </ion-button>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n          <br>\\n          <p class=\\\"info-text\\\">Acude a un módulo de pago y presenta este código para agilizar el pago de tu refrendo ó paga directamente desde aquí.</p>\\n          <br>\\n        </ion-card-content>\\n      </ion-card>\\n\\n      <!--Validar código QR-->\\n      <ion-card *ngIf=\\\"\\\" mode=\\\"ios\\\">\\n        <ion-card-header>\\n          <ion-button expand=\\\"block\\\" (click)=\\\"scanCodeQR()\\\">\\n            <ion-icon name=\\\"qr-scanner\\\" slot=\\\"start\\\"></ion-icon>\\n            Escanear QR\\n          </ion-button>\\n        </ion-card-header>\\n        <ion-card-content *ngIf=\\\"scannedCode\\\">\\n          El código escaneado es: {{ scannedCode }}\\n        </ion-card-content>\\n      </ion-card>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-grid fixed>\\n      <ion-row>\\n        <ion-col>\\n          <ion-button expand=\\\"block\\\" (click)=\\\"pagarRefrendo()\\\">\\n            Pagar\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row *ngIf=\\\"\\\">\\n        <ion-col>\\n          <ion-button expand=\\\"block\\\" (click)=\\\"downloadCode()\\\" *ngIf=\\\"qrData\\\">\\n            Descargar código\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-toolbar>\\n</ion-footer>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetalleRefrendoQrPage } from './detalle-refrendo-qr.page';\nimport { QRCodeModule } from 'angular2-qrcode';\nimport { NgxBarcodeModule } from 'ngx-barcode';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetalleRefrendoQrPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    QRCodeModule,\n    NgxBarcodeModule\n  ],\n  declarations: [DetalleRefrendoQrPage]\n})\nexport class DetalleRefrendoQrPageModule {}\n","export default \".grid-full-height {\\n  height: 100%;\\n}\\n\\n.row-full-height {\\n  height: 100%;\\n}\\n\\n.info-text {\\n  font-size: medium;\\n}\\n\\n.qrcode {\\n  text-align: center !important;\\n  padding: 10px !important;\\n}\\n\\n.barcode {\\n  text-align: center !important;\\n  padding: 10px !important;\\n}\\n\\n/*Flip div*/\\n\\n.scene {\\n  height: 200px;\\n  margin: 40px 0;\\n  perspective: 600px;\\n}\\n\\n.card {\\n  position: relative;\\n  cursor: pointer;\\n  transform-style: preserve-3d;\\n  transform-origin: center right;\\n  transition: transform 1s;\\n}\\n\\n.card.is-flipped {\\n  transform: translateX(-100%) rotateY(-180deg);\\n}\\n\\n.card__face {\\n  position: absolute;\\n  width: 100%;\\n  height: 225px;\\n  -webkit-backface-visibility: hidden;\\n          backface-visibility: hidden;\\n}\\n\\n.card__face--front {\\n  background: white;\\n}\\n\\n.card__face--back {\\n  background: white;\\n  transform: rotateY(180deg);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lZnJhaW4vSW9uaWNQcm9qZWN0cy9TRUZJTk1vdmlsL3NyYy9hcHAvcGFnZXMvZGV0YWxsZS1yZWZyZW5kby1xci9kZXRhbGxlLXJlZnJlbmRvLXFyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvZGV0YWxsZS1yZWZyZW5kby1xci9kZXRhbGxlLXJlZnJlbmRvLXFyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLFlBQUE7QUNBSjs7QURHQTtFQUNJLFlBQUE7QUNBSjs7QURHQTtFQUNJLGlCQUFBO0FDQUo7O0FER0E7RUFDSSw2QkFBQTtFQUNBLHdCQUFBO0FDQUo7O0FER0E7RUFDSSw2QkFBQTtFQUNBLHdCQUFBO0FDQUo7O0FER0EsV0FBQTs7QUFFQTtFQUNJLGFBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7QUNESjs7QURJQTtFQUNJLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLDRCQUFBO0VBQ0EsOEJBQUE7RUFDQSx3QkFBQTtBQ0RKOztBRElBO0VBQ0ksNkNBQUE7QUNESjs7QURJQTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxtQ0FBQTtVQUFBLDJCQUFBO0FDREo7O0FESUE7RUFDSSxpQkFBQTtBQ0RKOztBRElBO0VBQ0ksaUJBQUE7RUFDQSwwQkFBQTtBQ0RKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZGV0YWxsZS1yZWZyZW5kby1xci9kZXRhbGxlLXJlZnJlbmRvLXFyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ncmlkLWZ1bGwtaGVpZ2h0IHtcblxuICAgIGhlaWdodDogMTAwJTtcbn1cblxuLnJvdy1mdWxsLWhlaWdodCB7XG4gICAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uaW5mby10ZXh0IHtcbiAgICBmb250LXNpemU6IG1lZGl1bTtcbn1cblxuLnFyY29kZSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZzogMTBweCAhaW1wb3J0YW50O1xufVxuXG4uYmFyY29kZSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZzogMTBweCAhaW1wb3J0YW50O1xufVxuXG4vKkZsaXAgZGl2Ki9cblxuLnNjZW5lIHtcbiAgICBoZWlnaHQ6IDIwMHB4O1xuICAgIG1hcmdpbjogNDBweCAwO1xuICAgIHBlcnNwZWN0aXZlOiA2MDBweDtcbn1cbiAgXG4uY2FyZCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICAgIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlciByaWdodDtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMXM7XG59XG5cbi5jYXJkLmlzLWZsaXBwZWQge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSkgcm90YXRlWSgtMTgwZGVnKTtcbn1cblxuLmNhcmRfX2ZhY2Uge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDIyNXB4O1xuICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLmNhcmRfX2ZhY2UtLWZyb250IHtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbn1cblxuLmNhcmRfX2ZhY2UtLWJhY2sge1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIHRyYW5zZm9ybTogcm90YXRlWSgxODBkZWcpO1xufVxuIiwiLmdyaWQtZnVsbC1oZWlnaHQge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5yb3ctZnVsbC1oZWlnaHQge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5pbmZvLXRleHQge1xuICBmb250LXNpemU6IG1lZGl1bTtcbn1cblxuLnFyY29kZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlciAhaW1wb3J0YW50O1xuICBwYWRkaW5nOiAxMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5iYXJjb2RlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDEwcHggIWltcG9ydGFudDtcbn1cblxuLypGbGlwIGRpdiovXG4uc2NlbmUge1xuICBoZWlnaHQ6IDIwMHB4O1xuICBtYXJnaW46IDQwcHggMDtcbiAgcGVyc3BlY3RpdmU6IDYwMHB4O1xufVxuXG4uY2FyZCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgcmlnaHQ7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxcztcbn1cblxuLmNhcmQuaXMtZmxpcHBlZCB7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSkgcm90YXRlWSgtMTgwZGVnKTtcbn1cblxuLmNhcmRfX2ZhY2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDIyNXB4O1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi5jYXJkX19mYWNlLS1mcm9udCB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xufVxuXG4uY2FyZF9fZmFjZS0tYmFjayB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVkoMTgwZGVnKTtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\n\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport { Base64ToGallery } from '@ionic-native/base64-to-gallery/ngx';\nimport { ToastService } from '../../services/toast.service';\n\nimport { AndroidPermissions } from '@ionic-native/android-permissions/ngx';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\n\n@Component({\n  selector: 'detalle-refrendo-qr',\n  templateUrl: './detalle-refrendo-qr.page.html',\n  styleUrls: ['./detalle-refrendo-qr.page.scss'],\n})\nexport class DetalleRefrendoQrPage implements OnInit {\n\n  detalleRefrendo: any;\n  qrData = '';\n  scannedCode = null;\n\n  elementType : \"svg\" | \"img\" | \"canvas\" = \"img\";\n  \n  isQr = true;\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private barcodeScanner: BarcodeScanner,\n    private base64ToGallery: Base64ToGallery,\n    private toastService: ToastService,\n    private androidPermissions: AndroidPermissions,\n    private fileOpener: FileOpener\n  ) {\n    this.route.queryParams.subscribe(params => {\n      if(this.router.getCurrentNavigation().extras.state) {\n        this.detalleRefrendo = this.router.getCurrentNavigation().extras.state.detalleRefrendo;\n        this.qrData = this.detalleRefrendo.lcc;\n        console.log(this.detalleRefrendo);\n      }\n      \n    });\n\n    //#region Permisos necesarios (almacenar imagenes)\n\n    this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE).then(\n      result => console.log(\"Permissions granted\", result.hasPermission),\n      error => this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE)\n    );\n    this.androidPermissions.requestPermissions([this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE]);\n    //#endregion\n\n   }\n\n  ngOnInit() {\n  }\n\n  flipCard() {\n    var card = document.querySelector('.card') as HTMLDivElement;\n    card.classList.toggle('is-flipped');\n\n    this.isQr = !this.isQr;\n  }\n\n    /**\n   * Comprobar código QR coincida con linea de captura cerrada\n   */\n  scanCodeQR() {\n    this.barcodeScanner.scan().then(\n      barcodeData => {\n        this.scannedCode = barcodeData;\n      },\n      err => {\n        console.log(err);\n        this.toastService.present(err);\n      }\n    );\n  }\n\n  /**\n   * Descargar código QR\n   */\n  downloadCode() {\n    let element = null;\n    if (this.isQr) {\n      element = document.querySelector('.qrcode qr-code canvas') as HTMLCanvasElement;\n    } else {\n      element = document.querySelector('.barcode img') as HTMLImageElement;\n    }\n\n    if (!element) {\n      console.log(\"Elemento código no recuperado. Intente mas tarede\");\n      this.toastService.present(\"Elemento código no recuperado. Intente mas tarde\");\n      return false;\n    }\n    \n    const imageData = this.isQr ? element.toDataURL('image/jpeg').toString() : element.currentSrc.toString();\n    console.log('data: ', imageData);\n\n    let data = imageData.split(',')[1];\n    \n    const now = new Date(Date.now());\n    const fecha = now.toLocaleString();\n    const nombreArchivo = 'presupuesto_vehicular_' + this.detalleRefrendo.lcc + '_' + fecha;\n\n    this.base64ToGallery.base64ToGallery(data,\n      { prefix: '_img', mediaScanner: true })\n      .then(\n        res => {\n          console.log(\"Imagen guardada con exito\", res);\n          //await this.toastService.present(\"El código ha sido guardado en tu Galería de Fotos\");\n          this.fileOpener.open(res, \"image/png\").then(\n            () => console.log(\"Archivo abierto con exito\", res))\n            .catch( e=> console.log(\"Error al intentar abrir el archivo\", res));\n        }, \n        error => {\n          console.log(\"Error guardando imagen en galería\", error);\n          this.toastService.present(\"Error guardando imagen en galería: \" + error);\n        }\n      );\n  }\n\n  /**\n   * Abrir pasarela pago refrendo\n   */\n  pagarRefrendo() {\n    console.log(\"Redirigiendo pasarela pago refrendo\");\n\n    let navigationExtras: NavigationExtras = {\n      state: {\n        detalleRefrendo: this.detalleRefrendo\n      }\n    }\n\n    this.router.navigateByUrl('/app/tabs/refrendo/pago-refrendo', navigationExtras);\n  }\n}\n"],"sourceRoot":"webpack:///"}